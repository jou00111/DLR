<div class="container mt-5">
  <div class="row">
    <div class="col-md-8 mx-auto">
      <%= render "layouts/error", obj: @user %>

      <h2 class="text-center mb-4">ユーザー情報編集</h2>

      <%= form_with model: @user, url: users_information_path, method: :patch do |f| %> 
        <!-- プロフィール画像 -->
        <div class="form-group">
          <%= f.label :profile_image, "プロフィール画像" %>
          <%= f.file_field :profile_image, class: "form-control-file" %>
        </div>

        <!-- 氏名 -->
        <div class="form-group">
          <%= f.label :"名前" %>
          <%= f.text_field :name, class: 'form-control', autofocus: true, autocomplete: "name" %>
        </div>

        <!-- 得意分野 -->
        <div class="form-group">
          <%= f.label :"得意分野" %>
          <%= f.text_field :specify_field, class: 'form-control' %>
        </div>

        <!-- 紹介文 -->
        <div class="form-group">
          <%= f.label :"紹介文" %>
          <%= f.text_area :introduction, class: 'form-control', rows: 4 %>
        </div>

        <!-- メールアドレス -->
        <div class="form-group">
          <%= f.label :"メールアドレス" %>
          <%= f.email_field :email, class: 'form-control', autofocus: true, autocomplete: "email" %>
        </div>

        
          <div class="field">
          <%= f.check_box :change_password, {id: 'change_password_toggle'} %>
          <%= f.label :change_password, "パスワードを変更する" %>
        </div>
        
        <div id="password_fields" style="display: none;">
          <div class="field">
            <%= f.label :"パスワード" %><br />
            <%= f.password_field :password,class: 'form-control', autocomplete: "new-password" %>
            <% if @minimum_password_length %>
              <br />
              <em><%= @minimum_password_length %> characters minimum</em>
            <% end %>
          </div>
        
          <div class="field">
            <%= f.label :"パスワード(再確認)" %><br />
            <%= f.password_field :password_confirmation,class: 'form-control', autocomplete: "new-password" %>
          </div>
        
          <div class="field">
            <%= f.label :"現在のパスワード" %> <i>(変更を確認するには現在のパスワードが必要です)</i><br />
            <%= f.password_field :current_password,class: 'form-control', autocomplete: "current-password" %>
          </div>
        </div>
        
        <script>
          // Checkボックスの切り替えによってパスワードフィールドを表示・非表示にする
          document.getElementById('change_password_toggle').addEventListener('change', function() {
            const passwordFields = document.getElementById('password_fields');
            passwordFields.style.display = this.checked ? 'block' : 'none';
          });
        </script>
        
          <div class="actions">
            <%= f.submit "編集する" %>
          </div>
        <% end %>
      </div>
    </div>
  </div>  
